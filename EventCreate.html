<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Event</title>
    <link rel="stylesheet" type="text/css" href="newcss.css">
</head>
<body>
    <form id="event-form" action="http://localhost:5000/create-event" method="POST">
        <h1>Create Event</h1>

        <label for="event-name">Event Name:</label>
        <input type="text" id="event-name" name="event_name" placeholder="Enter event name" required>

        <label for="club-number">Club Number:</label>
        <input type="text" id="club-number" name="club_number" placeholder="Enter club number" required>

        <label for="event-date">Event Date:</label>
        <input type="date" id="event-date" name="event_date" required>

        <div class="form-action">
            <a href="ThankYOU.html"><button type="submit" id="submitForm">Submit</button></a> </div>
    </form>
        </div>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('eventCreation');
            document.getElementById('eventCreation').addEventListener('submit', function(event){
                event.preventDefault();
                const form = document.querySelector('form');
                if(!form.checkValidity()){
                    return;
                }
                alert("Thank you for choosing Young Life!");
                
                const formData = new FormData(form);
                const formObject = Object.fromEntries(formData.entries());
                console.log('Data:', formObject);
                const formName ={
                    name: form.id
                }
                if(formObject.Club === "Kamehameha"){
                    club_id = 1;
                }
                else club_id = 2;

                const event_info = {

                    CLUB_ID: club_id,
                    EVENT_NAME: formObject.event_name,
                    EVENT_DATE: formObject.event_date
                }

                const event_location = {

                    STREET_ADD: formObject.street,
                    CITY: formObject.city,
                    ZIP: formObject.zip,
                    STATE: formObject.state
                }


                let data = [formName, event_info, event_location];
                
                fetch('http://localhost:5000/submit-YLdata', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Response from server:', data);
                })
                .catch(error => console.error('Error:', error));
                
            })
                

        });

    </script>
</body>
</html>
